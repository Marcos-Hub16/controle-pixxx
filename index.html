<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Protagonismo</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FFD700">
</head>
<body>

  <img src="logo.png" alt="Logo" class="logo">

  <h1>Protagonismo</h1>
  <p>Organize quem pagou</p>

  <!-- Aba Login -->
  <div id="login" class="tabcontent">
    <div class="card">
      <input type="text" id="loginNome" placeholder="Seu nome">
      <input type="password" id="loginSenha" placeholder="Senha">
      <button onclick="entrar()">Entrar</button>
      <p id="loginMsg"></p>
    </div>
  </div>

  <!-- Abas (escondidas atÃ© login) -->
  <div class="tabs" style="display:none;">
    <button class="tablink active" onclick="openTab('enviar', event)">Enviar Pix</button>
    <button class="tablink" onclick="openTab('lista', event)">Lista de Pagamentos</button>
  </div>

  <!-- Aba Enviar Pix -->
  <div id="enviar" class="tabcontent" style="display:none;">
    <div class="card">
      <input type="number" id="valor" placeholder="Valor (R$)">
      <button id="btnPagar" onclick="iniciarPagamento(this)">Pagar</button>
      <p class="pix" id="chavePix" style="display:none;">PIX: 88994520224</p>
    </div>
  </div>

  <!-- Aba Lista de Pagamentos -->
  <div id="lista" class="tabcontent" style="display:none;">
    <h2>Pagamentos registrados</h2>
    <ul id="listaPagamentos"></ul>
    <h3>Total arrecadado: R$ <span id="total">0</span></h3>
  </div>

  <!-- BotÃ£o instalar app -->
  <button id="installBtn" style="display:none;">ðŸ“² Baixar aplicativo</button>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD8_Xn_GpvfAVsu-uZVve2h7ivz78bE6I8",
      authDomain: "controle-pix-8f3b5.firebaseapp.com",
      projectId: "controle-pix-8f3b5",
      storageBucket: "controle-pix-8f3b5.firebasestorage.app",
      messagingSenderId: "330284203781",
      appId: "1:330284203781:web:2e1316c9009a3bd18e816c"
    };

    const app = initializeApp(firebaseConfig);
    window.db = getFirestore(app);
  </script>

  <!-- Script principal -->
  <script type="module" src="script.js"></script>

  <!-- PWA: botÃ£o instalar -->
  <script>
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");

    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = "block";

      installBtn.addEventListener("click", () => {
        installBtn.style.display = "none";
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => { deferredPrompt = null; });
      });
    });
  </script>

</body>
</html>




